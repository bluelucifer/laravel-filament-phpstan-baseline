# PHPStan Level 3-5 Combined Baseline
# For transitioning from basic to intermediate strictness
# Last updated: 2025-08

includes:
    # Basic patterns (levels 0-2)
    - laravel-11.neon
    - filament-3.neon
    - livewire-3.neon

parameters:
    ignoreErrors:
        # ============================================
        # Level 3-5 Specific Suppressions
        # ============================================
        
        # Allow mixed in certain contexts during transition
        - '#Method .+::(handle|__invoke)\(\) has parameter \$.+ with no type specified#'
        
        # Allow missing return types for factories/seeders
        - '#Method .+Factory::.+ has no return type specified#'
        - '#Method .+Seeder::.+ has no return type specified#'
        
        # Allow test assertions without strict types
        - '#Method .+Test::.+ has no return type specified#'
        - '#Method .+TestCase::.+ has parameter \$.+ with no type specified#'
        
        # ============================================
        # Laravel/Filament Framework Specific Issues
        # ============================================
        
        # Laravel translation functions return array|string but methods expect string
        - '#Method .+::getNavigationGroup\(\) should return string\|null but returns \(array\|string\)#'
        - '#Method .+::getNavigationLabel\(\) should return string but returns \(array\|string\)#'
        - '#Method .+::getTitle\(\) should return string but returns \(array\|string\)#'
        - '#Method .+::getModelLabel\(\) should return string but returns \(array\|string\)#'
        - '#Method .+::getPluralModelLabel\(\) should return string but returns \(array\|string\)#'
        - '#Method .+::getHeading\(\) should return string but returns \(array\|string\)#'
        - '#Method .+::getRatingTrend\(\) should return string but returns \(array\|string\)#'
        - '#Method .+::getNPSCategory\(\) should return string but returns \(array\|string\)#'
        - '#Method .+::generateDescription\(\) should return string but returns \(array\|string\)#'
        
        # Anonymous functions with translation issues
        - '#Anonymous function should return string but returns \(array\|string\)#'
        
        # Collection template type covariance issues
        - '#Template type .+ of .+ is not covariant with template type .+ of .+#'
        - '#Method .+ should return .+Collection<.+> but returns .+Collection<.+>#'
        - '#Method .+ should return Illuminate\\Support\\Collection<.+> but returns Illuminate\\Support\\Collection<.+>#'
        - '#Template type TValue on class Illuminate\\Support\\Collection is not covariant#'
        
        # Mixed type issues in Laravel/Filament context
        - '#Cannot call method .+ on mixed#'
        - '#Argument of an invalid type mixed supplied for foreach, only iterables are supported#'
        - '#Cannot access offset .+ on mixed#'
        - '#Parameter .+ of .+ expects .+, mixed given#'
        
        # Event broadcasting return type flexibility
        - '#Method .+::broadcastWith\(\) should return array<int, mixed> but returns array<string, mixed>#'
        
        # Float to int conversion issues
        - '#Method .+::calculateNPS\(\) should return int but returns float#'
        
        # Livewire property initialization issues
        - '#Class .+Livewire.+ has an uninitialized property \$.+\. Give it default value or assign it in the constructor#'
        
        # Livewire listeners property type issues
        - '#Property .+::\$listeners .+ does not accept default value of type .+#'
        - '#Method .+::getListeners\(\) should return array<int, mixed> but returns array<.+>#'
        
        # Additional array type covariance issues
        - '#Method .+::calculateSpecialOffers\(\) should return array<.+> but returns array\{.+\}#'
        
        # Model relationship covariance issues (Eloquent level 3+ specific)
        - '#Method .+::.+\(\) should return Illuminate\\Database\\Eloquent\\Relations\\.+<.+> but returns Illuminate\\Database\\Eloquent\\Relations\\.+<.+, \$this\(.+\)>#'
        
        # ============================================
        # Level 3+ Specific Cast Issues
        # ============================================
        
        # Mixed to string/int casting issues
        - '#Cannot cast mixed to string#'
        - '#Cannot cast mixed to int#'
        - '#Cannot cast mixed to float#'
        - '#Cannot cast mixed to bool#'
        
        # Binary operations with mixed and error results (level 3+ specific)
        - '#Binary operation "\." between mixed and .+ results in an error#'
        - '#Binary operation "\*" between mixed and .+ results in an error#'
        - '#Binary operation "\+" between mixed and .+ results in an error#'
        - '#Binary operation "-" between mixed and .+ results in an error#'
        - '#Binary operation "/" between mixed and .+ results in an error#'
        - '#Binary operation "%" between mixed and .+ results in an error#'
        - '#Binary operation "\*\*" between mixed and .+ results in an error#'
        
        # Array return type issues for static methods
        - '#Method .+::getStatusOptions\(\) should return array<int, mixed> but returns array<string, .+>#'
        - '#Method .+::getTypeOptions\(\) should return array<int, mixed> but returns array<string, .+>#'
        - '#Method .+::getGrades\(\) should return array<int, mixed> but returns array<string, .+>#'
        - '#Method .+::getSources\(\) should return array<int, mixed> but returns array<string, .+>#'
        
        # ============================================
        # Eloquent Model Cast and Return Type Issues
        # ============================================
        
        # Model casts method compatibility  
        - '#Return type \(array<int, mixed>\) of method .+::casts\(\) should be compatible with return type \(array<string, string>\) of method .+::casts\(\)#'
        - '#Method .+::casts\(\) should return array<int, mixed> but returns array<string, string>#'
        
        # Float/int return type flexibility
        - '#Method .+::.+ should return int\|null but returns \(float\|int\)#'
        - '#Method .+::.+ should return int but returns \(float\|int\)#'
        - '#Method .+::.+ should return float but returns \(float\|int\)#'
        
        # BelongsToMany relationship covariance with pivot specification
        - '#Method .+::.+\(\) should return .+BelongsToMany<.+, .+Pivot, .+> but returns .+BelongsToMany<.+, \$this\(.+\), .+Pivot, .+>#'
        
        # Additional method return type issues with translations
        - '#Method .+::getTypes\(\) should return array<string, string> but returns array<string, \(array\|string\)>#'
        - '#Method .+::.+Attribute\(\) should return string but returns \(array\|string\)#'
        
        # ============================================
        # Remaining Issues for Manual Review
        # ============================================
        # Note: Some errors are intentionally not suppressed and should be reviewed:
        # - Call to undefined methods on specific models (getPdfUrl, approve, reject)
        # - Complex type variance in specific contexts
        # - Project-specific business logic type mismatches